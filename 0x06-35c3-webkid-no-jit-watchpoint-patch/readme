static bool tryDeletePropertyQuickly(VM& vm, JSObject* thisObject, Structure* structure, PropertyName propertyName, unsigned attributes, PropertyOffset offset)
{
    ASSERT(isInlineOffset(offset) || isOutOfLineOffset(offset));

    Structure* previous = structure->previousID();
    if (!previous)
        return false;

    unsigned unused;
    bool isLastAddedProperty = !isValidOffset(previous->get(vm, propertyName, unused));
    if (!isLastAddedProperty)
        return false;

    RELEASE_ASSERT(Structure::addPropertyTransition(vm, previous, propertyName, attributes, offset) == structure);

    if (offset == firstOutOfLineOffset && !structure->hasIndexingHeader(thisObject)) {
        ASSERT(!previous->hasIndexingHeader(thisObject) && structure->outOfLineCapacity() > 0 && previous->outOfLineCapacity() == 0);
        thisObject->setButterfly(vm, nullptr);
    }

    thisObject->setStructure(vm, previous);

    return true;
}

// no trigger jit watchpoint
if (!tryDeletePropertyQuickly(vm, thisObject, structure, propertyName, attributes, offset)) {
    thisObject->setStructure(vm, Structure::removePropertyTransition(vm, structure, propertyName, offset));
}


https://github.com/saelo/35c3ctf/tree/master/WebKid
